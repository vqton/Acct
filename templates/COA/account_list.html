{% extends 'base.html' %}
{% block title %}
    Chart Of Accounts
{% endblock title %}
{% block content %}

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <h1 class="navbar-brand">Account List</h1>
        <div class="navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <button class="btn btn-primary me-2">
                        <i class="bi bi-plus"></i> New Account
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn btn-danger me-2">
                        <i class="bi bi-trash"></i> Delete Selected
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn btn-secondary me-2">
                        <i class="bi bi-pencil"></i> Edit Account
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn btn-info" id="exportCsvBtn">
                        <i class="bi bi-file-earmark-text"></i> Export CSV
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn btn-success" id="importCsvBtn">
                        <i class="bi bi-upload"></i> Import CSV
                    </button>
                </li>
            </ul>
        </div>
    </div>
</nav>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Code</th>
            <th>Name</th>
            <th>Level</th>
            <th>Account Type</th>
            <th>Description</th>
            <th>Opening Balance</th>
            <th>Debit Only</th>
            <th>Parent Account</th>
            <th>Notes</th>
        </tr>
    </thead>
    <tbody>
        {% for account in accounts %}
            <tr>
                <td>{{ account.code }}</td>
                <td>{{ account.name }}</td>
                <td>{{ account.level }}</td>
                <td>{{ account.account_type }}</td>
                <td>{{ account.description }}</td>
                <td>{{ account.opening_balance }}</td>
                <td>{{ account.debit_only }}</td>
                <td>{{ account.parent_account }}</td>
                <td>{{ account.notes }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
<script>
    document.getElementById('exportCsvBtn').addEventListener('click', function() {
        // Redirect to the export CSV URL
        window.location.href = "{% url 'COA:export_csv' %}";
    });
    document.getElementById('importCsvBtn').addEventListener('click', function() {
        // Redirect to the import CSV URL
        window.location.href = "{% url 'COA:import_csv' %}";
    });
</script>
{% endblock %}